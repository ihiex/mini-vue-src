Vue工作机制

初始化

在new Vue()之后。 Vue会调用进行初始化，会初始化生命周期，事件，props,methods,data
computed与watch等， 其中最重要的是通过Object.defineProperty设置setter与getter,用来实现【响应式】以及【依赖收集】

初始化之后调用$mount挂载组件


编译：
编译模块分为三个阶段
    1. parse
        1. 使用正则解析template中的vue的指令（v-xxx）变量等等 形成语法树 AST
    2. optimize
        1.标记一些静态节点，用作后面的性能优化，在diff的时候直接略过
    3. generate
        1.把第一部生成的AST转化为渲染函数render function

核心逻辑获取dom，遍历dom,获取{{}}格式的变量，以及每个dom的属性，获取v-和@开头的设置响应式

响应式：
    这一块是vue最核心的内容
    getter和setter待会咱们会演示代码，初始化的时候defineProperty进行绑定，设置通知的机制
    当编译生成的渲染函数被实际渲染的时候，会触发getter进行依赖收集，在数据变化的时候，触发setter进行更新

虚拟dom:
    Virtual Dom 是react首创，Vue2开始支持，就是用javascript对象来描述dom结构，数据修改的时候，我们先修改虚拟dom中的数据，然后数据做diff，最后再汇总所有的diff，力求做最少的dom操作，毕竟js里对比很快，而真实的dom操作太慢

更新视图：
    数据修改触发setter，然后监听器会通知进行修改，通过对比两个dom数，得到改变的地方，就是path然后只需要把这些差异修改即可


vue编译过程是怎么样的：
 vue写的模板的语句 html根本就无法识别，我们通过编译的过程就可以依赖收集，通过依赖收集以后就可以把data中的数据模型和视图之间产生绑定的依赖关系，如果以后模型中的数据发生改变的时候，我们就可以通知这些依赖的地方让他们进行更新，这就是我们执行编译的目的
 然后我们就可以做到模型驱动视图的操作


双向绑定的原理是什么
 我们通常都会用v-model的指令放在input的元素上，我们在编译的时候可以解析出v-model,
 在操作的时候做一个事件监听，如果input发生变化的时候，我就可以把这个值发生变化的时候就可以把这个值 设到vue的实例上。vue的实例上实现了响应化，他们响应化的setter函数会触发所有模型依赖的地方去更新操作










